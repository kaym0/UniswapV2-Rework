import { Contract } from "ethers";
import { ethers } from "hardhat";
import { DreamSwapFactory } from "../typechain/DreamSwapFactory";
import { DreamSwapLiquidity } from "../typechain/DreamSwapLiquidity";
import { DreamSwapPair } from "../typechain/DreamSwapPair";

const WETH = {
    // Rinkeby
    address: "0xc778417e063141139fce010982780140aa0cd5ab",
};
async function main() {

    const factory = {
        address: "0x0C0F6F22b34d22f3f99D388760cb0b7c5326D12B"
    }

    const pair = {
        address: "0xdDbC07a5289fe236b835a55cc8c9dEEf615d8F48"
    }

    const liquidity = await deployLiquidityManagement();

    /// Deploy Router
    const router = await deployRouter();

    console.log("REACT_APP_LIQUIDITY=           ", liquidity.address);
    console.log("REACT_APP_ROUTER=              ", router.address);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////


    async function deployLiquidityManagement(): Promise<DreamSwapLiquidity | Contract> {
        const Liquidity = await ethers.getContractFactory("ToknLiquidity");
        const liquidity = await Liquidity.deploy(factory.address, pair.address);
        await liquidity.deployed();

        return liquidity;
    }

    async function deployRouter() {
        const Router = await ethers.getContractFactory("ToknRouter");
        const router = await Router.deploy(factory.address, WETH.address);
        await router.deployed();

        return router;
    }
}

// We recommend this pattern to be able to use async/await everywhere
// and properly handle errors.
main().catch((error) => {
    console.error(error);
    process.exitCode = 1;
});
